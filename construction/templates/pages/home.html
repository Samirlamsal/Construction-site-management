{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="{% static 'css/home.css' %}" />
    <script
      rel="javascript"
      type="text/javascript"
      src="{% static 'scripts.js' %}"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@200&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;400&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="header">
      <div class="title">
        <h4>Hello {{request.user}}, Welcome back</h4>
        <h2>Your Dashboard is updated</h2>
      </div>
      <div class="profileheader">
        <i class="fa fa-bell-o" aria-hidden="true"></i>
        <i class="fa fa-cog"></i>
        <div class="image" id="image" onclick="showmenu();">
          <img src="{{request.user.site_user.image.url}}" />
        </div>
      </div>
      <div class="menu" id="menu">
        <a href="#">
          <h2>
            <img src="{{request.user.site_user.image.url}}" />My Profile
          </h2></a
        >
        <p>
          <a href="{% url 'logout' %}"
            ><i class="fa fa-sign-out" aria-hidden="true"></i> &nbsp;&nbsp;Log
            Out</a
          >
        </p>
      </div>
    </div>

    <div class="search">
      <input type="text" id="search" name="search" placeholder="Search..." />
    </div>

    <div class="content">
      <div class="navig">
        <a href="{% url 'transaction_home' %}" style="text-decoration: none"
          ><div class="box">
            <i class="fa fa-home" aria-hidden="true"></i>
            <h3>Homescreen</h3>
          </div></a
        >
        <a href="{% url 'construction_home' %}" style="text-decoration: none">
          <div class="box">
            <i class="fa fa-building" aria-hidden="true"></i>
            <h3>Construction Sites</h3>
          </div>
        </a>
        <div class="box" onclick="xls_modal();">
          <i class="fa fa-folder" aria-hidden="true"></i>
          <h3>Ledger</h3>
        </div>
        <div class="box">
          <i class="fa fa-cog"></i>
          <h3>Button</h3>
        </div>
        <div class="box">
          <i class="fa fa-user" aria-hidden="true"></i>
          <h3>Users and Accounts</h3>
        </div>
        <div class="box">
          <i class="fa fa-sliders" aria-hidden="true"></i>
          <h3>Settings</h3>
        </div>
        <div class="box">
          <i class="fa fa-trash" aria-hidden="true"></i>
          <h3>Recycle Bin</h3>
        </div>
      </div>
      <div class="transactions">
        <div class="title">
          <h2>Transactions</h2>
          <div class="filter">
            <div class="box" onclick="filtermodal();">
              <i class="fa fa-filter" aria-hidden="true"></i>
              <h3>Filter</h3>
            </div>
            <div
              class="box"
              id="createtransaction"
              onclick="createtransactions()"
            >
              <i class="fa fa-plus" aria-hidden="true"></i>
              <h3>Create Transaction</h3>
            </div>
          </div>
        </div>
        <div class="hr"></div>
        <div class="table">
          <table style="width: 100%">
            <tr>
              <th>ID</th>
              <th>AMOUNT</th>
              <th>STATUS</th>
              <th>TRANS TYPE</th>
              <th>SUBMITTED BY</th>
              <th>CONSTRUCTION SITE</th>
              <th>DATE</th>
              <th>COMMENTS</th>
            </tr>
            {% for trans_data in trans_datas %}
            <tr>
              <td>{{trans_data.id}}</td>
              <td>{{trans_data.amount}}</td>
              <td>
                {%if trans_data.status == "Confirmed"%}

                <i class="fa fa-check" aria-hidden="true"></i>&nbsp;
                {{trans_data.status}} {%else%}

                <i class="fa fa-times" aria-hidden="true"></i>&nbsp;
                {{trans_data.status}} {%endif%}
              </td>
              <td>{{trans_data.trans_type}}</td>
              <td>{{trans_data.trans_user}}</td>
              <td>{{trans_data.trans_site.name}}</td>
              <td>{{trans_data.trans_date}}</td>
              <td>{{trans_data.comments}}</td>
            </tr>
            {% endfor %}
          </table>
        </div>
      </div>
    </div>
    <div id="filtermodal" class="filtermodal">
      <div class="modal">
        <h1>
          <i class="fa fa-filter" aria-hidden="true"></i>&nbsp;Filter Ledger
        </h1>
        <div class="close" onclick="closefiltermodal();">
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
        <h2>Filter by:</h2>
        <div class="form">
          <form method="get">
            <div class="hr"></div>
            <div class="input_field">
              <h3>Submited by</h3>
              {{myFilter.form.trans_user}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Since</h3>
              {{myFilter.form.start_date}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Construction Site</h3>
              {{myFilter.form.trans_site}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Status</h3>
              {{myFilter.form.confirmation_status}}
            </div>
            <div class="hr"></div>
            <div class="submit_field">
              <input type="submit" value="Filter" />
            </div>
          </form>
        </div>
      </div>
    </div>

    <div id="createtransactionmodal" class="createtransactionmodal">
      <div class="modal">
        <h1>
          <i class="fa fa-thumb-tack" aria-hidden="true"></i>
          &nbsp;Create Transaction
        </h1>
        <div class="close" onclick="closecreatetransactions();">
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
        <div class="form">
          <form action="/transaction_home/" method="POST">
            {% csrf_token %}
            <div class="hr"></div>
            <div class="input_field">
              <h3>Construction Site</h3>
              {{form.trans_site}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Amount</h3>
              {{form.amount}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Transaction Method</h3>
              {{form.trans_method}}
            </div>
            <div class="hr"></div>
            <div class="input_field">
              <h3>Comments</h3>
              {{form.comments}}
            </div>
            <div class="hr"></div>
            <div class="submit_field_transaction">
              <input
                type="button"
                onclick="closecreatetransactions();"
                value="Cancel"
              /><input type="submit" value="Create" />
            </div>
          </form>

          <img src="{% static 'images/flower.png' %}" />
        </div>
      </div>
    </div>
    <div id="xls_modal" class="download_xls">
      <div class="xls_modal">
        <a href="{% url 'xls_download' %}" style="text-decoration: none">
          <h1 onclick="close_xls_modal();">
            <i class="fa fa-thumb-tack" aria-hidden="true"></i>
            &nbsp;&nbsp;Download XLS
          </h1></a
        >
        <div class="close" onclick="close_xls_modal();">
          <i class="fa fa-times" aria-hidden="true"></i>
        </div>
      </div>
    </div>
  </body>
</html>
